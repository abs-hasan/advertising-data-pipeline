version: 2

sources:
  - name: raw_trendii
    description: "Raw TRENDii data lake tables"
    database: trendii-data-eng-task
    schema: trendii_dataset


    tables:
      - name: stg_events_ext
        description: "Raw event data from parquet files"
        columns:
          - name: event_created_at
            description: "Timestamp when the event was captured"
            tests: [not_null]
          - name: event_name
            description: "Type of event"
            tests:
              - not_null
              - accepted_values:
                  values: ['Mounts', 'ProductImpressions', 'ProductClick', 'TagLoaded']
          - name: event_context
            description: "Common context fields (ids, domain, etc.)"
            tests: [not_null]
          - name: event_data
            description: "Payload with product/mount/click details"


      - name: dim_product_ext
        description: "Raw product dimension from CSV (245 products)"
        columns:
          - name: id
            description: "Product ID"
            tests: [not_null, unique]
          - name: brand_id
            description: "Owning brand"
            tests: [not_null]
          - name: name
            description: "Product name"
            tests: [not_null]
     


      - name: dim_campaign_ext
        description: "Raw campaign dimension from CSV (6 campaigns, SCD2 style)"
        columns:
          - name: id
            description: "Campaign ID"
            tests: [not_null]
          - name: brand_id
            description: "Brand ID"
            tests: [not_null]
          - name: product_type
            description: "Billing type"
            tests:
              - accepted_values:
                  values: ['CPC', 'CPM', 'CPA']
                  config:
                    severity: warn
        

